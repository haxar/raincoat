raincoat v0.2 2003-01-27
andy@warmcat.com
http://xbox-linux.sf.net

BRIEFLY

Raincoat is a small Linux app which knows how to reflash your Xbox.
At the moment it has been tested with the SST49LF020 used in Cheapmod
and Xodus/Matrix mods and the ST29F080A on the Xbox Motherboard.

The newer Sharp TSOP LHF08CH1 is also supported but I am unable to
test it due to not having such a box.

INSTALLING

If you got raincoat as a tar, untar it into your home directory on
your Xbox like this:

# tar xzf raincoat-0.2.tar.gz

This will create a raincoat directory.  (You will already have this
directory is you got it from CVS.)  Enter the directory

# cd raincoat

Then:

# make
# su <give root password, xbox by default>
# make install

Now you can use raincoat from any directory


USING

You have to be root to use raincoat.

raincoat looks at a file /etc/raincoat.conf for details on
what flashes it can support.  This file is in the same format
as the EvoX flash definitions to minimize confusions.  Here is
a sample line:

Flash = 0xbf61,"SST SST49LF020",0x40000

The first number is the manufacturer/device ID for this kind of
flash.  The string is the user-presentable name of the flash
chip.  lastly is the size of the flash device in bytes.


The help that raincoat gives with no arguments is self-
explanitory for the rest of the functionality:


raincoat Flasher  0.1  Jan  6 2003  andy@warmcat.com  http://xbox-linux.sf.net
Reading /etc/raincoat.conf

Detected: SST SST49LF020 (256K)

raincoat [-p filetoprog] [-r filetodumpto] [-a hexoffset] [-v]

 -p filetoprog    Program flash with given file
 -r filetodumpto  Read whole flash back into file
 -a hexoffset     Optional start offset in flash, default 0
 -v               Verbose informational messages

Example:  raincoat -p cromwell.bin

Please note, -p will reprogram your BIOS flash
  Please do not use if you don't understand what that
  means, there is no simple undo for this if you
  programmed the wrong thing.
  -r is always safe to use, as is running with no args



Something that is not obvious is that raincoat only erases the
minimum possible footprint in the flash necessary to reprogram
the area used by the file being programmed.

Most flashes offer 64KByte or less block erase capability, and
it is this that is used in raincoat.  Together with the -a switch
this allows multiple files to be programmed into different
quadrants of a large flash device completely independently.  For
example:

raincoat -a 80000 -p myfile.bin

will reprogram the third quarter of a 1MByte flash only, assuming
myfile.bin is 256KBytes.  The other four quarters will be
completely untouched.
